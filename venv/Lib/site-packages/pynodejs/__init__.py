import binarystring
import subprocess
import os

__author__ = 'Dex Devlon'
__doc__ = 'nodejs runtime using python directly'

# pynodejs: initial python file


def install(silent:bool=False): # Installs nodejs and npm on all major OS
    if(silent==False):
        import pynodejs.external_libs.install
    elif(silent==True):
        import pynodejs.external_libs.silent_install

def nodejs(arg_list:list, user_input:bool=False):
    if(user_input==False):
        output = binarystring.b2s(subprocess.Popen(['node']+arg_list, stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.PIPE, shell=True).communicate()[0])
        return output
    elif(user_input==True):
        subprocess.Popen(['node']+arg_list, cwd=os.getcwd()).wait()

def npm(arg_list:list, user_input:bool=False):
    if(user_input==False):
        output = binarystring.b2s(subprocess.Popen(['npm']+arg_list, stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.PIPE, shell=True).communicate()[0])
        return output
    elif(user_input==True):
        subprocess.Popen(['npm']+arg_list, cwd=os.getcwd()).wait()
